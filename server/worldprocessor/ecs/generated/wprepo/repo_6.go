// Code generated by entityrepo generator. DO NOT EDIT.
package wprepo

import (
	"github.com/justclimber/fda/common/ecs"
	"github.com/justclimber/fda/common/ecs/entity"
	"github.com/justclimber/fda/common/ecs/entityrepo"
	"github.com/justclimber/fda/server/worldprocessor/ecs/wpcomponent")

type RepoForMask6 struct {
	ecGroups  []entityrepo.ECGroup
	repoLink ecs.EntityRepo
}

func NewRepoForMask6(repoLink ecs.EntityRepo) *RepoForMask6 {
	r := &RepoForMask6{ repoLink: repoLink }
    r.initRepoLink()
    return r
}

func (r *RepoForMask6) initRepoLink() {
	r.ecGroups = r.repoLink.GetECGroupsWithMask(Mask6)
}

func (r *RepoForMask6) Iterate(f func(
	id entity.Id,
	Moving wpcomponent.Moving,
	Player wpcomponent.Player,
) (*wpcomponent.Moving, *wpcomponent.Player)) {
	for _, cGroup := range r.ecGroups {
		switch cg := cGroup.(type) {
		case *ECGroupMask7:
			for _, chunk := range cg.Chunks {
				for k := 0; k < chunk.Size; k++ {
                    newMoving, newPlayer := f(chunk.Ids[k], chunk.Moving[k], chunk.Player[k])
                    
					if newMoving != nil {
						chunk.Moving[k] = *newMoving
					}
					if newPlayer != nil {
						chunk.Player[k] = *newPlayer
					}
				}
			}
		}
	}
}
